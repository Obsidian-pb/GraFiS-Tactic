# Работа в версии 12

## v12.0.00
- [x] обеспечена корректная работа системы в 201х версиях MS Visio
- [x] в трафарет "Отчеты" добавлен инструмент проверки схем("Мастер проверок"), включающий:
	- [x] оценку схем на наличие наиболее характерных ошибок (отсутствие указания решающего направления, подписей рукавных линий и т.д.)
	- [x] оценку Оперативно-тактических параметров текущей схемы (количество техники, рукавов, личного состава, звеньев ГДЗС и т.д.)
- [x] исправлены значения гидравлических сопротивлений для рукавов больших диаметров и механика их получения из базы данных (ранее гидравлические сопротивления менее 0,0001 не возвращались).
- [x] исправлены даты в фигурах - ранее в 201х версиях не все фигуры позволяли указывать корректные значения дат и времени
- [x] в качестве модели автоцистерны по-умолчанию выбрана условная АЦ-40 среднего класса, за основу которой взята одна из самых распространенных моделей АЦ - АЦ-3,2-40/4(43253)001-МС насос выбран НЦПК 40/100-4/400. ТТХ: боевой расчет - 5, Рукава 51 – 10шт., Рукава 77 – 8шт, Запас воды: 3200л, пенообразователя – 200л.
- [x] исправлены значения гидравлических сопротивлений для рукавов больших диаметров и механика их получения из базы данных (ранее гидравлические сопротивления менее 0,0001 не возвращались)
- [x] исправлена ошибка при попытке сформировать массив помещений на листе без помещений
- [x] звенья ГДЗС теперь имеют свойство "Состояние" позволяющее указывать работает ли звено или находится в резерви, либо заправляет баллоны СИЗОД;
- [x] при размещении звеньев ГДЗС поверх рукавных линий первые автоматически переключаются в состояние "Работает", при размещении не поверх линий - "В резерве". При этом численнойсть личного состава работающего со стволом зависит от того работает с ними звено ГДЗС или нет. Если да, то 0, если ствол работает без звена, то согласно требованиям.
- [x] исправлено отображение времени в подсказаках звена ГДЗС
- [x] фигуры боевых участков при размещении автоматически получают новый номер.

## v12.1.00
- [x] Звенья ГДЗС теперь автоматически разворачиваются параллельно рукавным линиям
- [x] Фигуры рукавов в скатках и гармошках теперь корректно обрабатываются при анализе
- [x] Полностью переписана механика анализа схем 
	- [x] Окно мастера проверок разбито на два окна, размещающихся пристыкованными к нижнему краю экрана - Окно "Мастер проверок" отображающее ошибки и недочеты схемы; Окно "Мастер тактических данных". Окна могут быть перемещены в любое место рабочего окна приложения Visio или вложены друг в друга
	- [x] Добавлено окно Настройки расчета. В данный момент здесь имеется возможность выбирать каким образом будет округляться требуемое количество звеньев ГДЗС, исходя из требования формирования одного резервного звена на каждые три работающих - в большую или меньшую сторону
- [x] Добавлены новые позиции для расчета: (рукавов проложено, рукавов имеется, запас воды на 10минут, общий запас пенообразователя, кол-во БУ и СПР, и т.д.)
- [x] Сделано корректное отображение, свищей и мостиков при разных масштабах;
- [x] Исправлен ряд ошибок связанных с функционированием окон из трафарета Формы управления
	- [x] Исправлено отображение времени в столбцах форм
	- [x] Исправлена ошибка возникавшая при клике по пустому списку
	- [x] Добавлена обработка ряда новых фигур (АПП, Машины на гусеничном ходу, Танк)
	- [x] В установочный пакет добавлена библиотека MSCOMCTL.OCX отвечающая за работу форм управления
- [x] Сделана корректная фигура пожарного поезда - с патрубками и свойствами расхода
- [x] В базу данных добавлен новый набор техники - Распространенные. В этом наборе находятся только самые распространенные модели техники. В целом это не слишком актуально, но для автоцистерн и автолестниц позволяет выбирать изначально из небольшого списка наиболее распространенных моделей. Модели определены в соответствии с наиболее популярными страницами проекта wiki-fire.org
- [x] Сделана постоянная ориентация относительно горизонта для подписи сторон света
- [x] В фигуре строки экспликации убраны отступы для ячеек таблицы, что позволяет более аккуратно ее масштабировать
- [x] Добавлена возможность указывать дополнительные сведения о ИНППВ в формате html. Можно указывать произвольные данные, в том числе изображения
- [x] Фигура «Всасывающая линия» из трафарета ПТВ теперь при размещении автоматически определяет из какого водоема забирает воду, что позволяет учитывать ее при проведении анализа НРС
- [x] Фигура «Гидроэлеватор» из трафарета ПТВ работает также
- [x] Исправлена ошибка привязывания фигур звеньев ГДЗС к удаленным линиям
- [x] Исправлен расчет максимальной длины рукавных линий (ранее перепад высот считался в обратную сторону)
- [x] Добавлен расчет максимально возможного расстояния прокладки рукавных линий
- [x] Исправлена ошибка при которой в версии Visio 2019 не формировался массив помещений объекта ссылаясь на отсутствие трафарета "Структурные элементы", несмотря на то, что данный трафарет был подключен
- [x] На панель работы со временем (панель "Таймер" трафарета "Спецфункции") добавлена кнопка "Установить текущее время" позволяющая одним нажатием указать для выбранных фигур текущее время схемы
- [x] Для трафарета "Линии" добавлена функция "Обратить в проброс". Проброс - это указание рукавной линии проложенной между этажами при использовании варианта схем с расположением поэтажных планов один над другим. Проброс не имеет длины, но может использоваться для указания перепада высоты
- [x] В трафарет "Отчеты" добавлен новый тип отчета - радиальная диаграмма. Эта фигура позволяет наглядно представить все основные показатели условий локализации пожара: достаточность личного состава, звеньев ГДЗС, основных пожарных автомобилей, расхода и запаса воды и количества поданных стволов (приведенных к общему расходу)
- [x] Исправлены ошибки принадлежности некоторых фигур к слоям. Например, ранее при попытке скрыть слой "Техника" фигуры АЛ скрывались, а вот сами лестницы этих автомобилей оставались видимыми
- [x] Исправлены ошибки связанные с вылетанием Visio при попытке удалить подписи зон горения, водоемов или универсальные подписи трафарета "Прочее"
- [x] Для фигур рукавных линий добавлена возможность расчета максимально возможного расхода воды при заданных условиях
- [x] Исправлена механика работы подписей рукавов - раньше они некорректно отображались на вертикальных и горизонтальных линиях
- [x] Переработаны фигуры расстояний и добавлена возможность их автоматической расстановки

## v12.1.01
- [x] Исправлены подписи в радиальной диаграмме. Теперь они корректно отображаются во всех масштабах.
- [x] Исправлена толщина линий в фигуре АКП
- [x] Исправлена ошибка при попытке экспорта схем в изображения (трафарет "Спецфункции")
- [x] Исправлена ошибка в таблице интенсовностей подачи воды для Жилых домов I, II, III степене огнестойкости. Ранее была 0,03 л/с/м.кв., что не соответствует справочным данным
- [x] Для графиков площади пожара и площади тушения добавлена опция "Время окончания не известно", позволяющая изображать график заканчивающимся прямой линией
- [x] Графики площади пожара и площади тушения теперь при расчете рассматривают зон6ы горения с одинаковым временем кок одну фигуру (данные о площади суммируются)
- [x] При вбрасывании поля совмещенного графика теперь учитывается не только площадь пожара, но и расход

- [ ] Сделать форму учета использования личного состава
- [ ] Упорядочены фигуры в трафаретах (Особенно то что касается конструкций и плана местности)
- [ ] 