# Работа в версии 12

## v12.0.00
- [x] обеспечена корректная работа системы в 201х версиях MS Visio
- [x] в трафарет "Отчеты" добавлен инструмент проверки схем("Мастер проверок"), включающий:
	- [x] оценку схем на наличие наиболее характерных ошибок (отсутствие указания решающего направления, подписей рукавных линий и т.д.)
	- [x] оценку Оперативно-тактических параметров текущей схемы (количество техники, рукавов, личного состава, звеньев ГДЗС и т.д.)
- [x] исправлены значения гидравлических сопротивлений для рукавов больших диаметров и механика их получения из базы данных (ранее гидравлические сопротивления менее 0,0001 не возвращались).
- [x] исправлены даты в фигурах - ранее в 201х версиях не все фигуры позволяли указывать корректные значения дат и времени
- [x] в качестве модели автоцистерны по-умолчанию выбрана условная АЦ-40 среднего класса, за основу которой взята одна из самых распространенных моделей АЦ - АЦ-3,2-40/4(43253)001-МС насос выбран НЦПК 40/100-4/400. ТТХ: боевой расчет - 5, Рукава 51 – 10шт., Рукава 77 – 8шт, Запас воды: 3200л, пенообразователя – 200л.
- [x] исправлены значения гидравлических сопротивлений для рукавов больших диаметров и механика их получения из базы данных (ранее гидравлические сопротивления менее 0,0001 не возвращались)
- [x] исправлена ошибка при попытке сформировать массив помещений на листе без помещений
- [x] звенья ГДЗС теперь имеют свойство "Состояние" позволяющее указывать работает ли звено или находится в резерви, либо заправляет баллоны СИЗОД;
- [x] при размещении звеньев ГДЗС поверх рукавных линий первые автоматически переключаются в состояние "Работает", при размещении не поверх линий - "В резерве". При этом численнойсть личного состава работающего со стволом зависит от того работает с ними звено ГДЗС или нет. Если да, то 0, если ствол работает без звена, то согласно требованиям.
- [x] исправлено отображение времени в подсказаках звена ГДЗС
- [x] фигуры боевых участков при размещении автоматически получают новый номер.

## v12.0.01
- [x] Звенья ГДЗС теперь автоматически развораиваются параллельно рукавным линиям
- [x] Фигуры рукавов в скатках и гармошках теперь корректно обрабатываются при анализе
- [x] Полностью переписана механика анализа схем 
	- [x] Окно мастера проверок разбито на два окна, размещающихся пристыкованными к нижнему краю экрана - Окно "Мастер проверок" отображающее ошибки и недочеты схемы; Окно "Мастер тактических данных". Окна могут быть перемещены в любое место рабочего окна приложения Visio или вложены друг в друга
	- [x] Добавлено окно настройка расчета. В данный момент здесь можно указать каким образо округляются звенья ГДЗС при расчете - в меньшую или юбольшую сторону
	- [x] Добавлена возможность выбирать каким образом будет округляться требуемое количество звеньев ГДЗС, исходя из требования формирования одного резервного звена на каждые три работающих - в большую или меньшую сторону
- [x] Добавлены новые позиции для расчета: (рукавов проложено, рукавов имеется, запас воды на 10минут, Кол-во БУ и СПР, и т.д.)
- [ ] Сделано корректное отображение, свищей и мостиков при разных масштабах;
- [x] Исправлен ряд ошибок связанных с функционированием окон из трафарета Формы управления
	- [x] Исправлено отображение времени в столбцах форм
	- [x] Исправлена ошибка возникавшая при клике по пустому списку
	- [x] Добавлена обработка ряда новых фигур (АПП, Машины на гусеничном ходу, Танк)
	- [x] В установочный пакет добавлена библиотека MSCOMCTL.OCX отвечающая за работу форм управления
- [x] Сделана корректная фигура пожарного поезда - с патрубками и свойствами расхода
- [x] В базу данных добавлен новый набор техники - Распространенные. В этом наборе находятся толкьо самые распространенные модели техники. В целом это не слишком актуально, но для автоцистерн и автолестниц позволяет выбирать изначально из небольшого списка наиболее распространенныъх моделей. Модели определены в соответствии с наиболее популярными страницами проекта wiki-fire.org
- [x] Сделана постоянная ориентация относительно горизонта для подписи сторон света
- [x] В фигуре строки экспликации убраны отсутпы для ячеек таблицы, что позволяет более аккратно ее масштабировать
- [x] Добавлена возможность указывать дополнительные сведения о ИНППВ в формате html. Можно указывать произвольные данные, в том числе изображения
- [ ] Фигура «Всасывающая линия» из Трафарета ПТВ теперь при размещении автоматически определяет из какого водоема забирает воду, что позволяет учитывать ее при проведении анализа НРС
- [x] Исправлена ошибка привязывания фигур звеньев ГДЗС к удаленным линиям
- [x] Исправлен расчет максимальной длины рукавных линий (ранее перепад высот считался в обратную сторону)
- [x] Добавлен расчет максимально возможного расстояния прокладки рукавных линий
- [x] Исправлена ошибка при которой в версии Visio 2019 не формировался массив помещений объекта ссылаясь на отсутствие трафарета "Структурные элементы", несмотря на то, что данный трафарет был подключен
- [x] Окна форм цправления теперь добавляются не отдельными окнами, накладываясь друг на друга, а во вкладках общего окна
- [x] На панель работы со временем (панель "Таймер" трафарета "Спецфункции") добавлена кнопка "Установить текущее время" позволяющая одним нажатием указать для выбранных фигур текущее время схемы
- [x] Для трафарета "Линии" добавлена функция "Обратить в проброс". Проброс - это указание рукавной линии проложенной между этажами при использовании фарианта схем с расположением поэтажных планов один над друним. Проброс не имеет длины, но может использоваться для указания перепада высоты
